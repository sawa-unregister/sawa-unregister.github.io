(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1337945a"],{"217c":function(e,t,n){},"4e22":function(e,t,n){"use strict";n("ebc3")},7908:function(e,t,n){"use strict";n("217c")},b540:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e._self._c,o=e._self._setupProxy;return t("div",{staticClass:"mobile-login-c"},[t("div",{staticClass:"title",attrs:{dir:"auto"}},[e._v(e._s(o._T("登录/注册")))]),t("div",{staticClass:"tips",attrs:{dir:"auto"}},[e._v(e._s(o._T("请输入你的手机号，获取验证码以登录Sawa")))]),t("div",{staticClass:"mobile-c"},[t("div",{staticClass:"line"}),t("div",{staticClass:"container"},[t("router-link",{staticClass:"country-zone",attrs:{to:"/selectCountry"}},[t("div",{staticClass:"flag",style:{backgroundImage:o.countryFlag?"url(".concat(n("9806")("./flags_"+o.countryFlag+".imageset/flags_"+o.countryFlag+"@2x.png"),")"):""}}),t("div",{staticClass:"country-code",attrs:{dir:"auto"}},[e._v(e._s("+".concat(o.country)))]),t("div",{staticClass:"select-icon"})]),t("div",{staticClass:"split"}),t("input",{directives:[{name:"model",rawName:"v-model.number",value:o.mobile,expression:"mobile",modifiers:{number:!0}}],ref:"mobileInputRef",staticClass:"phone-number-input",attrs:{type:"number",placeholder:o._T("手机号"),dir:"rtl"},domProps:{value:o.mobile},on:{blur:[o.handlePhoneNumberBlur,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(o.mobile=e._n(t.target.value))}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:o.mobile,expression:"mobile"}],staticClass:"clear-icon",on:{click:o.clearMobile}})],1),t("div",{staticClass:"line"})]),t("div",{staticClass:"code-c"},[t("div",{staticClass:"container"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:o.code,expression:"code",modifiers:{number:!0}}],ref:"codeInputRef",staticClass:"code-number-input",attrs:{type:"number",placeholder:o._T("请输入验证码"),dir:"rtl"},domProps:{value:o.code},on:{blur:[o.handleCodeBlur,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(o.code=e._n(t.target.value))}}}),t("div",{class:{"send-code-btn-active":o.sendCodeBtnStatus===o.SendCodeBtnStatus.ENABLED,"send-code-btn-inactive":o.sendCodeBtnStatus===o.SendCodeBtnStatus.COOLING},attrs:{dir:"auto"},on:{click:function(e){return o.getCode()}}},[e._v(" "+e._s(o.sendCodeBtnText)+" ")])]),t("div",{staticClass:"line"})]),t("div",{staticClass:"login-btn",class:{"login-btn-active":o.loginBtnStatus===o.LoginBtnStatus.ACTIVE,"login-btn-inactive":o.loginBtnStatus===o.LoginBtnStatus.INACTIVE},attrs:{dir:"auto"},on:{click:function(){return o.login(!1)}}},[e._v(" "+e._s(o._T("登录"))+" ")]),o.loading?t("LoadingComp"):e._e()],1)},a=[],c=(n("ddb0"),n("2b0e")),s=n("b48f"),r=n("1cec"),i=n("af18"),l=n("03b9"),u=n("f87c"),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.showWrap?t("div",{staticClass:"toast wrap",class:e.showContent?"fadein":"fadeout",attrs:{dir:"auto"}},[e._v(" "+e._s(e.text)+" ")]):e._e()},v=[];const b=c["default"].extend({props:{text:{type:String,default:""}},data(){return{showWrap:!0,showContent:!0}}}),_=(e,t=4e3)=>{const n=new b({el:document.createElement("div")}),o=n.$el;n.text=e,document.body.appendChild(o),setTimeout((()=>{n.showContent=!1}),t-1250),setTimeout((()=>{n.showWrap=!1}),t)};var f,p,m=b,C=m,g=(n("4e22"),n("2877")),O=Object(g["a"])(C,d,v,!1,null,"601d3ead",null),j=(O.exports,n("66c5")),h=n("a773"),y=n("7292"),T=n("7df8"),w=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"create-modal-c"},[t("div",{staticClass:"title",attrs:{dir:"auto"}},[e._v(e._s(n._T("创建账号")))]),t("div",{staticClass:"desc",attrs:{dir:"auto"}},[e._v(e._s(n._T("你还没有Sawa账号，是否马上创建账号并登录Sawa Ludo？")))]),t("div",{staticClass:"btn-list"},[t("div",{staticClass:"btn confirm",attrs:{dir:"auto"},on:{click:n.click}},[e._v(e._s(n._T("确定")))]),t("div",{staticClass:"btn cancel",attrs:{dir:"auto"},on:{click:n.cancel}},[e._v(e._s(n._T("取消")))])])])},E=[],B=Object(c["defineComponent"])({__name:"index",props:{cb:null,source:null,onCancel:null},setup(e){const t=e;function n(){Object(y["c"])(y["b"].h5_loginpage_enpower_no_account_pop_click,{source:t.source,element_name:"确定"}),t.cb(),t.onCancel()}function o(){Object(y["c"])(y["b"].h5_loginpage_enpower_no_account_pop_click,{source:t.source,element_name:"取消"}),t.onCancel()}return Object(c["onMounted"])((()=>{Object(y["c"])(y["b"].h5_loginpage_enpower_no_account_pop_show,{source:t.source})})),{__sfc:!0,props:t,click:n,cancel:o,_T:i["_T"]}}}),I=B,S=(n("7908"),Object(g["a"])(I,w,E,!1,null,"61ca5e90",null)),k=S.exports;(function(e){e[e["ENABLED"]=1]="ENABLED",e[e["COOLING"]=2]="COOLING"})(f||(f={})),function(e){e[e["ACTIVE"]=1]="ACTIVE",e[e["INACTIVE"]=2]="INACTIVE"}(p||(p={}));var N=Object(c["defineComponent"])({__name:"mobile",setup(e){function t(e){try{P("input_account",`${a.value}`,`${w.value}`)}catch(t){reportError(t)}}function n(e){console.log("用户已离开输入框：",e.target.value);try{P("input_code",`${a.value}`,`${w.value}`)}catch(t){reportError(t)}}Object(r["onBeforeRouteLeave"])(((e,t,n)=>{if("Mobile"===t.name&&"Home"===e.name)try{P("return")}catch(o){reportError(o)}n()}));const o=Object(c["computed"])((()=>b.value>0?Object(i["sprintf"])(Object(i["_T"])("重新发送{second}"),{second:b.value}):v.value===f.ENABLED?Object(i["_T"])("发送验证码"):"")),a=Object(c["ref"])(null),d=Object(c["ref"])(null),v=Object(c["ref"])(f.ENABLED),b=Object(c["ref"])(0),m=Object(c["ref"])(!1),C=Object(c["ref"])(),g=Object(c["ref"])();function O(){u["a"].state.country=Object(h["b"])("region_phone_code")||"966",u["a"].state.countryFlag=Object(h["b"])("region_code")||"SA"}O();const w=Object(c["computed"])((()=>u["a"].state.country)),E=Object(c["computed"])((()=>u["a"].state.countryFlag)),B=Object(c["ref"])(""),I=Object(c["computed"])((()=>a.value&&w.value&&d.value?p.ACTIVE:p.INACTIVE));function S(e){const t=Object(s["a"])(e);return console.log("validateMobile:",e,t),t}function N(){a.value=null}function x(){const e=Object(c["getCurrentInstance"])(),t=e.proxy.$refs.mobileInputRef;Object(c["nextTick"])((()=>{t.focus()}))}function L(e){b.value>0?setTimeout((()=>{const t=Object(i["getSysTs"])();b.value=Math.floor((e-t)/1e3),L(e)}),1e3):v.value=f.ENABLED}async function $(e=0){if(v.value===f.COOLING)return;if(!a.value)return void _(Object(i["_T"])("请输入您的手机号"));if(!w.value)return void _(Object(i["_T"])("请选择国家/地区"));const t=`+${w.value}  ${a.value}`;if(!S(t))return void _(Object(i["_T"])("手机号码输入有误，请调整后重试"));if(m.value)return;m.value=!0;try{P("send_code",`${a.value}`,`${w.value}`)}catch(u){reportError(u)}v.value=f.COOLING;const[n,{result:o,data:c,message:s,toast:r}]=await Object(j["a"])(a.value,w.value);if(m.value=!1,n&&0===o)try{V(`${w.value}`,`${a.value}`,`${o}`,`${s||""}`)}catch(u){reportError(u)}else if(-2e4===o){if(e>0)return;await Object(l["a"])(),$(e+1)}else r&&_(r)}async function A(e=!1){if(!a.value)return void _(Object(i["_T"])("请输入您的手机号"));if(!d.value)return void _(Object(i["_T"])("请输入验证码"));if(!w.value)return void _(Object(i["_T"])("请选择国家/地区"));try{P("submit",`${a.value}`,`${w.value}`)}catch(r){reportError(r)}if(m.value)return;m.value=!0;const[t,{result:n,data:o,message:c,toast:s}]=await Object(j["b"])(a.value,d.value,w.value,e);return console.log("loginWithMobile:",t,n,o,c),t?0!==n?(s&&_(s),m.value=!1,void(20312===n&&D((()=>A(!0)),"phone"))):(o&&o.user_info&&o.user_info.session_key&&(B.value=o.user_info.session_key,Object(h["g"])({data:o},"sawaksa_mobile")),void(m.value=!1)):(m.value=!1,void _(Object(i["_T"])("获取数据失败，请稍后重试")))}function M(){Object(i["reportEvent"])(y["b"].h5_phoneloginpage,{source:"phone"})}function P(e,t,n){Object(i["reportEvent"])(y["b"].h5_login_detailpage_elementclick,{source:"phone",operation_type:e,phone_str:t,country_code_str:n})}function V(e,t,n,o){Object(i["reportEvent"])(y["b"].h5_verifycodeloginpage_verifycode,{country_code_str:e,phone_str:t,result:n,error_message:o})}function D(e,t){Object(T["a"])(k,{cb:e,source:t})}return Object(c["onMounted"])((()=>{x(),M()})),Object(c["watch"])((()=>v.value),((e,t)=>{if(console.log("mobile:",e,t),e===f.COOLING){const e=Object(i["getSysTs"])(),t=60;b.value=t,L(e+1e3*t)}else b.value=0})),{__sfc:!0,SendCodeBtnStatus:f,LoginBtnStatus:p,handlePhoneNumberBlur:t,handleCodeBlur:n,sendCodeBtnText:o,mobile:a,code:d,sendCodeBtnStatus:v,sendCodeBtnCoolingS:b,loading:m,codeInputRef:C,mobileInputRef:g,getDefaultCountryFromUrl:O,country:w,countryFlag:E,session_key:B,loginBtnStatus:I,validateMobile:S,clearMobile:N,focusMobileInput:x,calcSendCodeBtnStatus:L,getCode:$,login:A,reportPageLoad:M,reportClick:P,reportCodeResult:V,showCreateModal:D,_T:i["_T"]}}}),x=N,L=(n("df79"),Object(g["a"])(x,o,a,!1,null,"b4ab3206",null));t["default"]=L.exports},d8dc:function(e,t,n){},df79:function(e,t,n){"use strict";n("d8dc")},ebc3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1337945a.8f2c5b24.js.map