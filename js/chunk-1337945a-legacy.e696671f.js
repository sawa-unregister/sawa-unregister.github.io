(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1337945a"],{"217c":function(e,t,n){},"4e22":function(e,t,n){"use strict";n("ebc3")},7908:function(e,t,n){"use strict";n("217c")},b540:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"mobile-login-c"},[t("div",{staticClass:"title",attrs:{dir:"auto"}},[e._v(e._s(a._T("登录/注册")))]),t("div",{staticClass:"tips",attrs:{dir:"auto"}},[e._v(e._s(a._T("请输入你的手机号，获取验证码以登录Sawa")))]),t("div",{staticClass:"mobile-c"},[t("div",{staticClass:"line"}),t("div",{staticClass:"container"},[t("router-link",{staticClass:"country-zone",attrs:{to:"/selectCountry"}},[t("div",{staticClass:"flag",style:{backgroundImage:a.countryFlag?"url(".concat(n("9806")("./flags_"+a.countryFlag+".imageset/flags_"+a.countryFlag+"@2x.png"),")"):""}}),t("div",{staticClass:"country-code",attrs:{dir:"auto"}},[e._v(e._s("+".concat(a.country)))]),t("div",{staticClass:"select-icon"})]),t("div",{staticClass:"split"}),t("input",{directives:[{name:"model",rawName:"v-model.number",value:a.mobile,expression:"mobile",modifiers:{number:!0}}],ref:"mobileInputRef",staticClass:"phone-number-input",attrs:{type:"number",placeholder:a._T("手机号"),dir:"rtl"},domProps:{value:a.mobile},on:{blur:[a.handlePhoneNumberBlur,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(a.mobile=e._n(t.target.value))}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:a.mobile,expression:"mobile"}],staticClass:"clear-icon",on:{click:a.clearMobile}})],1),t("div",{staticClass:"line"})]),t("div",{staticClass:"code-c"},[t("div",{staticClass:"container"},[t("input",{directives:[{name:"model",rawName:"v-model.number",value:a.code,expression:"code",modifiers:{number:!0}}],ref:"codeInputRef",staticClass:"code-number-input",attrs:{type:"number",placeholder:a._T("请输入验证码"),dir:"rtl"},domProps:{value:a.code},on:{blur:[a.handleCodeBlur,function(t){return e.$forceUpdate()}],input:function(t){t.target.composing||(a.code=e._n(t.target.value))}}}),t("div",{class:{"send-code-btn-active":a.sendCodeBtnStatus===a.SendCodeBtnStatus.ENABLED,"send-code-btn-inactive":a.sendCodeBtnStatus===a.SendCodeBtnStatus.COOLING},attrs:{dir:"auto"},on:{click:function(e){return a.getCode()}}},[e._v(" "+e._s(a.sendCodeBtnText)+" ")])]),t("div",{staticClass:"line"})]),t("div",{staticClass:"login-btn",class:{"login-btn-active":a.loginBtnStatus===a.LoginBtnStatus.ACTIVE,"login-btn-inactive":a.loginBtnStatus===a.LoginBtnStatus.INACTIVE},attrs:{dir:"auto"},on:{click:function(){return a.login(!1)}}},[e._v(" "+e._s(a._T("登录"))+" ")]),a.loading?t("LoadingComp"):e._e()],1)},c=[],r=n("c7eb"),o=n("3835"),u=n("1da1"),s=(n("99af"),n("2b0e")),i=n("b48f"),l=n("1cec"),d=n("af18"),b=n("03b9"),f=n("f87c"),p=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.showWrap?t("div",{staticClass:"toast wrap",class:e.showContent?"fadein":"fadeout",attrs:{dir:"auto"}},[e._v(" "+e._s(e.text)+" ")]):e._e()},v=[],_=s["default"].extend({props:{text:{type:String,default:""}},data:function(){return{showWrap:!0,showContent:!0}}}),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4e3,n=new _({el:document.createElement("div")}),a=n.$el;n.text=e,document.body.appendChild(a),setTimeout((function(){n.showContent=!1}),t-1250),setTimeout((function(){n.showWrap=!1}),t)};var C,g,O=_,h=O,j=(n("4e22"),n("2877")),y=Object(j["a"])(h,p,v,!1,null,"601d3ead",null),x=(y.exports,n("66c5")),k=n("a773"),T=n("7292"),w=n("7df8"),E=function(){var e=this,t=e._self._c,n=e._self._setupProxy;return t("div",{staticClass:"create-modal-c"},[t("div",{staticClass:"title",attrs:{dir:"auto"}},[e._v(e._s(n._T("创建账号")))]),t("div",{staticClass:"desc",attrs:{dir:"auto"}},[e._v(e._s(n._T("你还没有Sawa账号，是否马上创建账号并登录Sawa Ludo？")))]),t("div",{staticClass:"btn-list"},[t("div",{staticClass:"btn confirm",attrs:{dir:"auto"},on:{click:n.click}},[e._v(e._s(n._T("确定")))]),t("div",{staticClass:"btn cancel",attrs:{dir:"auto"},on:{click:n.cancel}},[e._v(e._s(n._T("取消")))])])])},B=[],I=Object(s["defineComponent"])({__name:"index",props:{cb:null,source:null,onCancel:null},setup:function(e){var t=e;function n(){Object(T["c"])(T["b"].h5_loginpage_enpower_no_account_pop_click,{source:t.source,element_name:"确定"}),t.cb(),t.onCancel()}function a(){Object(T["c"])(T["b"].h5_loginpage_enpower_no_account_pop_click,{source:t.source,element_name:"取消"}),t.onCancel()}return Object(s["onMounted"])((function(){Object(T["c"])(T["b"].h5_loginpage_enpower_no_account_pop_show,{source:t.source})})),{__sfc:!0,props:t,click:n,cancel:a,_T:d["_T"]}}}),S=I,N=(n("7908"),Object(j["a"])(S,E,B,!1,null,"61ca5e90",null)),L=N.exports;(function(e){e[e["ENABLED"]=1]="ENABLED",e[e["COOLING"]=2]="COOLING"})(C||(C={})),function(e){e[e["ACTIVE"]=1]="ACTIVE",e[e["INACTIVE"]=2]="INACTIVE"}(g||(g={}));var A=Object(s["defineComponent"])({__name:"mobile",setup:function(e){function t(e){try{W("input_account","".concat(c.value),"".concat(E.value))}catch(t){reportError(t)}}function n(e){console.log("用户已离开输入框：",e.target.value);try{W("input_code","".concat(c.value),"".concat(E.value))}catch(t){reportError(t)}}Object(l["onBeforeRouteLeave"])((function(e,t,n){if("Mobile"===t.name&&"Home"===e.name)try{W("return")}catch(a){reportError(a)}n()}));var a=Object(s["computed"])((function(){return _.value>0?Object(d["sprintf"])(Object(d["_T"])("重新发送{second}"),{second:_.value}):v.value===C.ENABLED?Object(d["_T"])("发送验证码"):""})),c=Object(s["ref"])(null),p=Object(s["ref"])(null),v=Object(s["ref"])(C.ENABLED),_=Object(s["ref"])(0),O=Object(s["ref"])(!1),h=Object(s["ref"])(),j=Object(s["ref"])();function y(){f["a"].state.country=Object(k["b"])("region_phone_code")||"966",f["a"].state.countryFlag=Object(k["b"])("region_code")||"SA"}y();var E=Object(s["computed"])((function(){return f["a"].state.country})),B=Object(s["computed"])((function(){return f["a"].state.countryFlag})),I=Object(s["ref"])(""),S=Object(s["computed"])((function(){return c.value&&E.value&&p.value?g.ACTIVE:g.INACTIVE}));function N(e){var t=Object(i["a"])(e);return console.log("validateMobile:",e,t),t}function A(){c.value=null}function M(){var e=Object(s["getCurrentInstance"])(),t=e.proxy.$refs.mobileInputRef;Object(s["nextTick"])((function(){t.focus()}))}function P(e){_.value>0?setTimeout((function(){var t=Object(d["getSysTs"])();_.value=Math.floor((e-t)/1e3),P(e)}),1e3):v.value=C.ENABLED}function V(){return D.apply(this,arguments)}function D(){return D=Object(u["a"])(Object(r["a"])().mark((function e(){var t,n,a,u,s,i,l,f,p,_=arguments;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=_.length>0&&void 0!==_[0]?_[0]:0,v.value!==C.COOLING){e.next=3;break}return e.abrupt("return");case 3:if(c.value){e.next=6;break}return m(Object(d["_T"])("请输入您的手机号")),e.abrupt("return");case 6:if(E.value){e.next=9;break}return m(Object(d["_T"])("请选择国家/地区")),e.abrupt("return");case 9:if(n="+".concat(E.value,"  ").concat(c.value),N(n)){e.next=13;break}return m(Object(d["_T"])("手机号码输入有误，请调整后重试")),e.abrupt("return");case 13:if(!O.value){e.next=15;break}return e.abrupt("return");case 15:O.value=!0;try{W("send_code","".concat(c.value),"".concat(E.value))}catch(r){reportError(r)}return v.value=C.COOLING,e.next=20,Object(x["a"])(c.value,E.value);case 20:if(a=e.sent,u=Object(o["a"])(a,2),s=u[0],i=u[1],l=i.result,i.data,f=i.message,p=i.toast,O.value=!1,!s||0!==l){e.next=33;break}try{$("".concat(E.value),"".concat(c.value),"".concat(l),"".concat(f||""))}catch(r){reportError(r)}e.next=42;break;case 33:if(-2e4!==l){e.next=41;break}if(!(t>0)){e.next=36;break}return e.abrupt("return");case 36:return e.next=38,Object(b["a"])();case 38:V(t+1),e.next=42;break;case 41:p&&m(p);case 42:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function F(){return R.apply(this,arguments)}function R(){return R=Object(u["a"])(Object(r["a"])().mark((function e(){var t,n,a,u,s,i,l,b,f,v=arguments;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]&&v[0],c.value){e.next=4;break}return m(Object(d["_T"])("请输入您的手机号")),e.abrupt("return");case 4:if(p.value){e.next=7;break}return m(Object(d["_T"])("请输入验证码")),e.abrupt("return");case 7:if(E.value){e.next=10;break}return m(Object(d["_T"])("请选择国家/地区")),e.abrupt("return");case 10:try{W("submit","".concat(c.value),"".concat(E.value))}catch(r){reportError(r)}if(!O.value){e.next=13;break}return e.abrupt("return");case 13:return O.value=!0,e.next=16,Object(x["b"])(c.value,p.value,E.value,t);case 16:if(n=e.sent,a=Object(o["a"])(n,2),u=a[0],s=a[1],i=s.result,l=s.data,b=s.message,f=s.toast,console.log("loginWithMobile:",u,i,l,b),u){e.next=29;break}return O.value=!1,m(Object(d["_T"])("获取数据失败，请稍后重试")),e.abrupt("return");case 29:if(0===i){e.next=34;break}return f&&m(f),O.value=!1,20312===i&&U((function(){return F(!0)}),"phone"),e.abrupt("return");case 34:l&&l.user_info&&l.user_info.session_key&&(I.value=l.user_info.session_key,Object(k["g"])({data:l},"sawaksa_mobile")),O.value=!1;case 36:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function G(){Object(d["reportEvent"])(T["b"].h5_phoneloginpage,{source:"phone"})}function W(e,t,n){Object(d["reportEvent"])(T["b"].h5_login_detailpage_elementclick,{source:"phone",operation_type:e,phone_str:t,country_code_str:n})}function $(e,t,n,a){Object(d["reportEvent"])(T["b"].h5_verifycodeloginpage_verifycode,{country_code_str:e,phone_str:t,result:n,error_message:a})}function U(e,t){Object(w["a"])(L,{cb:e,source:t})}return Object(s["onMounted"])((function(){M(),G()})),Object(s["watch"])((function(){return v.value}),(function(e,t){if(console.log("mobile:",e,t),e===C.COOLING){var n=Object(d["getSysTs"])(),a=60;_.value=a,P(n+1e3*a)}else _.value=0})),{__sfc:!0,SendCodeBtnStatus:C,LoginBtnStatus:g,handlePhoneNumberBlur:t,handleCodeBlur:n,sendCodeBtnText:a,mobile:c,code:p,sendCodeBtnStatus:v,sendCodeBtnCoolingS:_,loading:O,codeInputRef:h,mobileInputRef:j,getDefaultCountryFromUrl:y,country:E,countryFlag:B,session_key:I,loginBtnStatus:S,validateMobile:N,clearMobile:A,focusMobileInput:M,calcSendCodeBtnStatus:P,getCode:V,login:F,reportPageLoad:G,reportClick:W,reportCodeResult:$,showCreateModal:U,_T:d["_T"]}}}),M=A,P=(n("df79"),Object(j["a"])(M,a,c,!1,null,"b4ab3206",null));t["default"]=P.exports},d8dc:function(e,t,n){},df79:function(e,t,n){"use strict";n("d8dc")},ebc3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1337945a-legacy.e696671f.js.map